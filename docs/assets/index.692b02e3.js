var d=Object.defineProperty;var p=(h,e,a)=>e in h?d(h,e,{enumerable:!0,configurable:!0,writable:!0,value:a}):h[e]=a;var r=(h,e,a)=>(p(h,typeof e!="symbol"?e+"":e,a),a);import{P as n}from"./vendor.c2cc9365.js";const u=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))i(t);new MutationObserver(t=>{for(const s of t)if(s.type==="childList")for(const m of s.addedNodes)m.tagName==="LINK"&&m.rel==="modulepreload"&&i(m)}).observe(document,{childList:!0,subtree:!0});function a(t){const s={};return t.integrity&&(s.integrity=t.integrity),t.referrerpolicy&&(s.referrerPolicy=t.referrerpolicy),t.crossorigin==="use-credentials"?s.credentials="include":t.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(t){if(t.ep)return;t.ep=!0;const s=a(t);fetch(t.href,s)}};u();var g={type:n.WEBGL,parent:"game",backgroundColor:"#33A5E7",scale:{width:96*2,height:160*2,mode:n.Scale.FIT,autoCenter:n.Scale.CENTER_BOTH},physics:{default:"arcade",arcade:{gravity:{x:0,y:0}}},fps:10,antialias:!1,render:{pixelArt:!0}};const y={path:"assets/img/chana_ss.png",scale:2,frameW:32,frameH:32,frameStart:0,frameEnd:3,bodySize:{w:20,h:30}},S={path:"assets/img/masara_ss.png",scale:2,frameW:32,frameH:32,frameStart:0,frameEnd:3,bodySize:{w:20,h:30}},b={path:"assets/img/makiko_ss.png",scale:2,frameW:32,frameH:32,frameStart:0,frameEnd:1,bodySize:{w:20,h:30}},k={path:"assets/img/makoto_ss.png",scale:1,frameW:64,frameH:64,frameStart:0,frameEnd:3,bodySize:{w:40,h:60}},w={path:"assets/img/rancia_ss.png",scale:2,frameW:32,frameH:32,frameStart:0,frameEnd:1,bodySize:{w:20,h:30}},C={path:"assets/img/taki_ss.png",scale:2,frameW:32,frameH:32,frameStart:0,frameEnd:3,bodySize:{w:20,h:30}},x={path:"assets/img/tanikou_kari.png",scale:2,frameW:28,frameH:32,frameStart:0,frameEnd:3,bodySize:{w:20,h:30}},v={path:"assets/img/konataro_ss.png",scale:2,frameW:32,frameH:32,frameStart:0,frameEnd:1,bodySize:{w:20,h:30}},_={path:"assets/img/watari_ss.png",scale:2,frameW:32,frameH:32,frameStart:0,frameEnd:3,bodySize:{w:20,h:30}},E={path:"assets/img/chachamaru_ss.png",scale:2,frameW:32,frameH:32,frameStart:0,frameEnd:3,bodySize:{w:20,h:30}},W={path:"assets/img/dairi_ss.png",scale:2,frameW:32,frameH:32,frameStart:0,frameEnd:3,bodySize:{w:20,h:30}},H={path:"assets/img/erishia_ss.png",scale:2,frameW:32,frameH:32,frameStart:0,frameEnd:3,bodySize:{w:20,h:30}},z={path:"assets/img/taguchi_ss.png",scale:2,frameW:32,frameH:32,frameStart:0,frameEnd:3,bodySize:{w:20,h:30}};var o={chana:y,masara:S,makiko:b,makoto:k,rancia:w,taki:C,tanikou:x,konataro:v,watari:_,chachamaru:E,dairi:W,erishia:H,taguchi:z};class A extends n.Physics.Arcade.Sprite{constructor(e,a,i,t){super(e,a,i,t);r(this,"charaTween");r(this,"isMove");r(this,"name");r(this,"move_anime");r(this,"idle_anime");r(this,"customPipeline");return e.add.existing(this),e.physics.add.existing(this),this.isMove=!1,this.name=t,this.changeChara(t),this.setAnime(t,o[t].frameStart,o[t].frameEnd),this.setInteractive(),this.setOrigin(.5,.9),this.on("pointerup",s=>{console.log(this.name)}),this.scene.game.renderer,this}move(e,a,i){this.charaTween&&(this.charaTween.stop(),this.charaTween.remove()),this.isMove=!0;let t=!1;const s={x:e,y:a};this.x<s.x&&(t=!0),this.flipX=t,this.charaTween=this.scene.tweens.add({targets:this,props:{x:{value:s.x,duration:Math.abs(s.x-this.x)*20},y:{value:s.y,duration:Math.abs(s.y-this.y)*20}},ease:"Sine.easeInOut",callbackScope:this,onComplete:()=>{this.anims.stop(),this.isMove=!1,this.setFrame(0),i&&i()}})}changeChara(e){this.name=e,this.setTexture(e),this.setScale(o[e].scale),this.body.setSize(o[e].bodySize.w,o[e].bodySize.h),this.anims.remove("move"),this.setAnime(e,o[e].frameStart,o[e].frameEnd)}evolution(e){this.move(96,160,async()=>{this.scene.tweens.addCounter({from:255,to:0,duration:1e3,onUpdate:a=>{const i=Math.floor(a.getValue());this.setTint(n.Display.Color.GetColor(i,i,i))},onComplete:()=>{this.scene.tweens.addCounter({from:0,to:255,duration:1e3,onUpdate:a=>{const i=Math.floor(a.getValue());this.setTintFill(n.Display.Color.GetColor(i,i,i))},onComplete:()=>{this.name=="chana"?this.changeChara("masara"):this.name=="masara"?this.changeChara(n.Utils.Array.GetRandom(["makiko","rancia"])):this.changeChara(n.Utils.Array.GetRandom(Object.keys(o))),this.clearTint()}})}})})}setAnime(e=this.name,a=0,i=3){this.move_anime=this.scene.anims.create({key:e+"_move",frames:this.anims.generateFrameNumbers(e,{start:a,end:i}),frameRate:10}),this.idle_anime=this.scene.anims.create({key:e+"_idle",frames:this.anims.generateFrameNumbers(e,{start:0,end:1}),frameRate:2,repeat:-1})}preUpdate(e,a){super.preUpdate(e,a),this.isMove?this.anims.play(this.name+"_move",!0):this.anims.play(this.name+"_idle",!0)}}class T extends n.Scene{constructor(){super("GameScene");r(this,"isAnime");r(this,"charaTween");r(this,"player");r(this,"charaName");this.isAnime=!1,this.charaName="chana"}preload(){this.load.image("sky","assets/img/sky.png"),this.load.image("ground","assets/img/ground.png");for(const e in o)if(Object.prototype.hasOwnProperty.call(o,e)){const a=o[e];this.load.spritesheet(e,a.path,{frameWidth:a.frameW,frameHeight:a.frameH})}}create(){const a=this.scale.width/2,i=this.scale.height,t=i/2,s=this.add.image(a,t,"sky"),m=this.add.image(a,i-32,"ground");s.scale=2,m.scale=2,this.player=new A(this,32,100,this.charaName),this.player.setCollideWorldBounds(!0),s.setInteractive(),s.on("pointerup",c=>{var f;(f=this.player)==null||f.move(c.upX,c.upY)},this)}update(){}}class l extends n.GameObjects.Container{constructor(e,a,i,t){super(e,a,i);r(this,"seKey","");r(this,"text");r(this,"sprite");r(this,"frame");r(this,"fill",0);r(this,"stroke",16777215);const{color:s,text:m="",onClick:c}=t;this.scene=e,this.scene.add.existing(this),this.sprite=e.add.sprite(0,0,"btn",1),this.setSize(60,36).setInteractive(),this.sprite.setTint(s),this.sprite.setScale(2),this.frame=e.add.sprite(0,0,"btn_frame",1),this.frame.setScale(2),this.text=e.add.text(0,0,m,{fontSize:"12px",align:"center",color:"#ffffff",fontFamily:"misaki"}),this.text.setAlpha(.9),this.text.setOrigin(.5,.9),this.add([this.sprite,this.frame,this.text]),this.setAnime(),this.on("pointerup",f=>{c&&c(f),this.sprite.anims.play("btn",!0),this.frame.anims.play("btn_frame",!0)})}setSeKey(e){return this.seKey=e,this}setText(e){return this.text.setText(e),this}setAnime(){this.scene.anims.create({key:"btn",frames:this.sprite.anims.generateFrameNumbers("btn",{frames:[1,0,1]}),frameRate:15}),this.scene.anims.create({key:"btn_frame",frames:this.frame.anims.generateFrameNumbers("btn_frame",{frames:[1,0,1]}),frameRate:15})}}class O extends n.Scene{constructor(){super("UIScene");r(this,"game");n.Scene.call(this,{key:"UIScene",active:!0})}preload(){this.load.spritesheet("btn","assets/img/btn_gray2.png",{frameWidth:30,frameHeight:18}),this.load.spritesheet("btn_frame","assets/img/btn_gray_frame.png",{frameWidth:30,frameHeight:18})}create(){this.game=this.scene.get("GameScene"),new l(this,32,300,{color:16711680,text:"\u3054\u306F\u3093",onClick:()=>{console.log("gohan")}}),new l(this,96,300,{color:16776960,text:"\u3046\u3093\u3069\u3046",onClick:()=>{console.log("undou")}}),new l(this,160,300,{color:39423,text:"\u30C8\u30A4\u30EC",onClick:()=>{console.log("toire")}}),new l(this,32,20,{text:"\u3057\u3093\u304B",onClick:()=>{var e;console.log("shinka"),(e=this.game.player)==null||e.evolution("taki")}}),new l(this,160,20,{text:"\u30EA\u30BB\u30C3\u30C8",onClick:()=>{var e;console.log("reset"),(e=this.game.player)==null||e.changeChara("chana")}})}}new n.Game(Object.assign(g,{scene:[T,O]}));
