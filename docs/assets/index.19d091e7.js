var g=Object.defineProperty;var y=(o,e,s)=>e in o?g(o,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):o[e]=s;var a=(o,e,s)=>(y(o,typeof e!="symbol"?e+"":e,s),s);import{P as h}from"./vendor.c2cc9365.js";const S=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))r(t);new MutationObserver(t=>{for(const i of t)if(i.type==="childList")for(const c of i.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function s(t){const i={};return t.integrity&&(i.integrity=t.integrity),t.referrerpolicy&&(i.referrerPolicy=t.referrerpolicy),t.crossorigin==="use-credentials"?i.credentials="include":t.crossorigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(t){if(t.ep)return;t.ep=!0;const i=s(t);fetch(t.href,i)}};S();var k={type:h.CANVAS,parent:"game",backgroundColor:"#33A5E7",scale:{width:96*2,height:160*2,mode:h.Scale.FIT,autoCenter:h.Scale.CENTER_BOTH},physics:{default:"arcade",arcade:{gravity:{x:0,y:0}}},fps:10,antialias:!1,dom:{createContainer:!0}};const b={path:"assets/img/makoto_ss.png",scale:1,frameW:64,frameH:64,frameStart:0,frameEnd:3,bodySize:{w:40,h:60}},w={path:"assets/img/taki_ss.png",scale:2,frameW:32,frameH:32,frameStart:0,frameEnd:3,bodySize:{w:20,h:30}},v={path:"assets/img/tanikou_kari.png",scale:2,frameW:28,frameH:32,frameStart:0,frameEnd:3,bodySize:{w:20,h:30}},x={path:"assets/img/makiko_ss.png",scale:2,frameW:32,frameH:32,frameStart:0,frameEnd:1,bodySize:{w:20,h:30}},C={path:"assets/img/ranshia_ss.png",scale:2,frameW:32,frameH:32,frameStart:0,frameEnd:1,bodySize:{w:20,h:30}},_={path:"assets/img/konataro_ss.png",scale:2,frameW:32,frameH:32,frameStart:0,frameEnd:1,bodySize:{w:20,h:30}},A={path:"assets/img/watari_ss.png",scale:2,frameW:32,frameH:32,frameStart:0,frameEnd:3,bodySize:{w:20,h:30}};var n={makoto:b,taki:w,tanikou:v,makiko:x,ranshia:C,konataro:_,watari:A};class E extends h.Physics.Arcade.Sprite{constructor(e,s,r,t){super(e,s,r,t);a(this,"charaTween");a(this,"isMove");a(this,"name");a(this,"move_anime");a(this,"idle_anime");return e.add.existing(this),e.physics.add.existing(this),this.isMove=!1,this.name=t,this.changeChara(t),this.setAnime(t,n[t].frameStart,n[t].frameEnd),this}move(e,s){this.charaTween&&(this.charaTween.stop(),this.charaTween.remove()),this.isMove=!0;let r=!1;const t={x:e,y:s};this.x<t.x&&(r=!0),this.flipX=r,this.charaTween=this.scene.tweens.add({targets:this,props:{x:{value:t.x,duration:Math.abs(t.x-this.x)*20},y:{value:t.y,duration:Math.abs(t.y-this.y)*20}},ease:"Sine.easeInOut",callbackScope:this,onComplete:()=>{this.anims.stop(),this.isMove=!1,this.setFrame(0)}})}changeChara(e){this.name=e,this.setTexture(e),this.setScale(n[e].scale),this.body.setSize(n[e].bodySize.w,n[e].bodySize.h),this.anims.remove("move"),this.setAnime(e,n[e].frameStart,n[e].frameEnd)}setAnime(e=this.name,s=0,r=3){this.move_anime=this.scene.anims.create({key:e+"_move",frames:this.anims.generateFrameNumbers(e,{start:s,end:r}),frameRate:10}),this.idle_anime=this.scene.anims.create({key:e+"_idle",frames:this.anims.generateFrameNumbers(e,{start:0,end:1}),frameRate:2,repeat:-1})}preUpdate(e,s){super.preUpdate(e,s),this.isMove?this.anims.play(this.name+"_move",!0):this.anims.play(this.name+"_idle",!0)}}class W extends h.Scene{constructor(){super("GameScene");a(this,"isAnime");a(this,"charaTween");a(this,"player");a(this,"charaName");this.isAnime=!1,this.charaName="taki"}preload(){this.load.image("sky","assets/img/sky.png"),this.load.image("ground","assets/img/ground.png");for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e)){const s=n[e];this.load.spritesheet(e,s.path,{frameWidth:s.frameW,frameHeight:s.frameH})}}create(){const s=this.scale.width/2,r=this.scale.height,t=r/2,i=this.add.image(s,t,"sky"),c=this.add.image(s,r-32,"ground");i.scale=2,c.scale=2,this.player=new E(this,32,100,this.charaName),this.player.setCollideWorldBounds(!0),this.input.on("pointerup",l=>{var d,m;(d=this.player)==null||d.changeChara(h.Utils.Array.GetRandom(Object.keys(n))),(m=this.player)==null||m.move(l.upX,l.upY)},this)}update(){}}class z extends h.GameObjects.Container{constructor(e,s,r,t,i,{align:c="center",fontSize:l=15,color:d="red"}={}){super(e,s,r);a(this,"seKey","");a(this,"text");a(this,"sprite");a(this,"fill",0);a(this,"stroke",16777215);const{width:m=30,height:p=18,onClick:f}=i;this.scene=e,this.scene.add.existing(this),this.sprite=e.add.sprite(0,0,"btn",1),this.setSize(m,p).setInteractive(),this.setScale(2),this.add([this.sprite]),this.setAnime(),this.on("pointerup",u=>{f&&f(u),this.sprite.anims.play("btn",!0)})}setSeKey(e){return this.seKey=e,this}setText(e){return this.text.setText(e),this}setAnime(){this.scene.anims.create({key:"btn",frames:this.sprite.anims.generateFrameNumbers("btn",{frames:[1,0,1]}),frameRate:15})}}class H extends h.Scene{constructor(){super("UIScene");a(this,"score");this.score=0,h.Scene.call(this,{key:"UIScene",active:!0})}preload(){this.load.spritesheet("btn","assets/img/btn.png",{frameWidth:30,frameHeight:18})}create(){new z(this,40,250,"\u3054\u306F\u3093",{width:30,height:18,onClick:()=>{console.log("Click!!")}})}}new h.Game(Object.assign(k,{scene:[W,H]}));
