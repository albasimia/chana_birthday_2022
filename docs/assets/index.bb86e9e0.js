var f=Object.defineProperty;var p=(o,e,s)=>e in o?f(o,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):o[e]=s;var r=(o,e,s)=>(p(o,typeof e!="symbol"?e+"":e,s),s);import{P as c}from"./vendor.c2cc9365.js";const u=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))i(t);new MutationObserver(t=>{for(const a of t)if(a.type==="childList")for(const h of a.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&i(h)}).observe(document,{childList:!0,subtree:!0});function s(t){const a={};return t.integrity&&(a.integrity=t.integrity),t.referrerpolicy&&(a.referrerPolicy=t.referrerpolicy),t.crossorigin==="use-credentials"?a.credentials="include":t.crossorigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function i(t){if(t.ep)return;t.ep=!0;const a=s(t);fetch(t.href,a)}};u();var g={type:c.CANVAS,parent:"game",backgroundColor:"#33A5E7",scale:{width:96*2,height:160*2,mode:c.Scale.FIT,autoCenter:c.Scale.CENTER_BOTH},physics:{default:"arcade",arcade:{gravity:{x:0,y:0}}},fps:10,antialias:!1};const y={path:"assets/img/makoto_ss.png",scale:1,frameW:64,frameH:64,frameStart:0,frameEnd:3},k={path:"assets/img/taki_ss.png",scale:2,frameW:32,frameH:32,frameStart:0,frameEnd:3},v={path:"assets/img/tanikou_kari.png",scale:2,frameW:28,frameH:32,frameStart:0,frameEnd:3},S={path:"assets/img/makiko_ss.png",scale:2,frameW:32,frameH:32,frameStart:0,frameEnd:1};var n={makoto:y,taki:k,tanikou:v,makiko:S};class w extends c.Physics.Arcade.Sprite{constructor(e,s,i,t){super(e,s,i,t);r(this,"charaTween");r(this,"isMove");r(this,"name");r(this,"move_anime");r(this,"idle_anime");return e.add.existing(this),e.physics.add.existing(this),this.isMove=!1,this.name=t,this.setScale(n[t].scale),this.setAnime(t,n[t].frameStart,n[t].frameEnd),this}move(e,s){this.charaTween&&(this.charaTween.stop(),this.charaTween.remove()),this.isMove=!0;let i=!1;const t={x:e,y:s};this.x<t.x&&(i=!0),this.flipX=i,this.charaTween=this.scene.tweens.add({targets:this,props:{x:{value:t.x,duration:Math.abs(t.x-this.x)*20},y:{value:t.y,duration:Math.abs(t.y-this.y)*20}},ease:"Sine.easeInOut",callbackScope:this,onComplete:()=>{this.anims.stop(),this.isMove=!1,this.setFrame(0)}})}changeChara(e){this.name=e,this.setTexture(e),this.setScale(n[e].scale),this.body.setSize(20,32),this.anims.remove("move"),this.setAnime(e,n[e].frameStart,n[e].frameEnd)}setAnime(e=this.name,s=0,i=3){this.move_anime=this.scene.anims.create({key:e+"_move",frames:this.anims.generateFrameNumbers(e,{start:s,end:i}),frameRate:10}),this.idle_anime=this.scene.anims.create({key:e+"_idle",frames:this.anims.generateFrameNumbers(e,{start:0,end:1}),frameRate:2,repeat:-1})}preUpdate(e,s){super.preUpdate(e,s),this.isMove?this.anims.play(this.name+"_move",!0):this.anims.play(this.name+"_idle",!0)}}class _ extends c.Scene{constructor(){super("GameScene");r(this,"isAnime");r(this,"charaTween");r(this,"player");r(this,"charaName");this.isAnime=!1,this.charaName="taki"}preload(){this.load.image("sky","assets/img/sky.png"),this.load.image("ground","assets/img/ground.png");for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e)){const s=n[e];this.load.spritesheet(e,s.path,{frameWidth:s.frameW,frameHeight:s.frameH})}}create(){const s=this.scale.width/2,i=this.scale.height,t=i/2,a=this.add.image(s,t,"sky"),h=this.add.image(s,i-32,"ground");a.scale=2,h.scale=2,this.player=new w(this,32,100,this.charaName),this.player.flipX=!0,this.player.setCollideWorldBounds(!0),this.input.on("pointerup",m=>{var l,d;(l=this.player)==null||l.changeChara(c.Utils.Array.GetRandom(["tanikou","taki","makoto","makiko"])),(d=this.player)==null||d.move(m.upX,m.upY)},this)}update(){}}new c.Game(Object.assign(g,{scene:[_]}));
